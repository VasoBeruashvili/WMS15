{
    "type": "Ext.panel.Panel",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "border": false,
        "container|align": "stretch",
        "designer|userAlias": "customers",
        "designer|userClassName": "Customers",
        "height": 599,
        "icon": null,
        "iconCls": "",
        "keyMapConfig": [
            "{\r",
            "    bindings: [\r",
            "        {\r",
            "            ctrl: false,\r",
            "            key: Ext.EventObject.ESC,\r",
            "            btnItemId: 'btnClear'\r",
            "        }\r",
            "    ]\r",
            "}"
        ],
        "layout": "vbox",
        "title": "",
        "width": 746
    },
    "configAlternates": {
        "keyMapConfig": "object"
    },
    "designerId": "7a30a954-ecf0-4370-9ce2-d5de0361f1aa",
    "customConfigs": [
        {
            "group": "(Custom Properties)",
            "name": "keyMapConfig",
            "type": "string"
        }
    ],
    "cn": [
        {
            "type": "Ext.container.Container",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "container|align": "stretch",
                "layout": "hbox",
                "layout|flex": null,
                "margin": "10 10 0 10"
            },
            "designerId": "0d136c8b-f766-4d89-be42-46c2a791a3d3",
            "cn": [
                {
                    "type": "Ext.button.Button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "iconCls": "icon-add",
                        "itemId": "btnAdd",
                        "margin": "0 10 0 0",
                        "text": "",
                        "tooltip": [
                            "დამატება"
                        ]
                    },
                    "designerId": "77a95e34-5b4b-4886-b34f-823c293a0000",
                    "cn": [
                        {
                            "type": "basiceventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onBtnAddClick",
                                "implHandler": [
                                    "var form = button.up('customers');\r",
                                    "var grdCustomers = FindControl(form, 'grdCustomers');\r",
                                    "var record = Ext.create('SIS.model.CustomerModel');\r",
                                    "\r",
                                    "var win = Ext.create('SIS.view.AddCustomer', {\r",
                                    "    formModel: record,\r",
                                    "    animateTarget: button,\r",
                                    "    save: function(model){\r",
                                    "        var data = ModelToJson(model);\r",
                                    "        Request(\r",
                                    "            '/Home/SaveCustomer',\r",
                                    "            data,\r",
                                    "            function(response)\r",
                                    "            {\r",
                                    "                grdCustomers.getStore().load();\r",
                                    "            }\r",
                                    "        );\r",
                                    "    }\r",
                                    "});\r",
                                    "\r",
                                    "win.setRecord();\r",
                                    "win.show();"
                                ],
                                "name": "click",
                                "scope": "me"
                            },
                            "designerId": "fa0d10ad-35ee-4b46-87d4-562ca4128b6d"
                        }
                    ]
                },
                {
                    "type": "Ext.button.Button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "iconCls": "icon-edit",
                        "itemId": "btnEdit",
                        "margin": "0 5 0 0",
                        "scale": null,
                        "text": "",
                        "tooltip": [
                            "რედაქტირება\r",
                            ""
                        ]
                    },
                    "designerId": "262d8098-43dc-4c8d-b9f3-0487143a5d02",
                    "cn": [
                        {
                            "type": "basiceventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onBtnEditClick",
                                "implHandler": [
                                    "var form = button.up('customers');\r",
                                    "var grdCustomers = FindControl(form, 'grdCustomers');\r",
                                    "var record = grdCustomers.getSelectedRecord();\r",
                                    "\r",
                                    "if(IsNullOrEmpty(record))\r",
                                    "{\r",
                                    "    Ext.MessageBox.show({\r",
                                    "        title: 'მყიდველის რედაქტირება',\r",
                                    "        msg: '<center>მყიდველი არ არის მონიშნული</center>',\r",
                                    "        width:300,\r",
                                    "        iconCls: 'icon-edit',\r",
                                    "        buttons: Ext.MessageBox.OK,\r",
                                    "        animateTarget: button\r",
                                    "    });\r",
                                    "}\r",
                                    "else\r",
                                    "{\r",
                                    "    var win = Ext.create('SIS.view.AddCustomer', {\r",
                                    "        formModel: record,\r",
                                    "        iconCls: 'icon-edit',\r",
                                    "        save: function(model){\r",
                                    "            var data = ModelToJson(model);\r",
                                    "            Request(\r",
                                    "                '/Home/SaveCustomer',\r",
                                    "                data,\r",
                                    "                function(response)\r",
                                    "                {\r",
                                    "                    grdCustomers.getStore().load();\r",
                                    "                }\r",
                                    "            );\r",
                                    "        },\r",
                                    "        animateTarget: button\r",
                                    "    });\r",
                                    "\r",
                                    "    win.setTitle('მყიდველის რედაქტირება');\r",
                                    "    win.setRecord();\r",
                                    "    win.show();\r",
                                    "}"
                                ],
                                "name": "click",
                                "scope": "me"
                            },
                            "designerId": "4f453b06-6a7d-459d-aab4-0a7948d67485"
                        }
                    ]
                },
                {
                    "type": "Ext.container.Container",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|flex": 1.5
                    },
                    "designerId": "b5b7248f-a7ab-4012-a793-dd819e8e68ba"
                },
                {
                    "type": "Ext.form.field.ComboBox",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "clearCls": "x-form-clear-trigger",
                        "cls": null,
                        "displayField": "Name",
                        "emptyCls": null,
                        "emptyText": "დასახელება",
                        "enableKeyEvents": true,
                        "fieldLabel": null,
                        "itemId": "cmbName",
                        "layout|flex": 1,
                        "minChars": 1,
                        "selectOnFocus": true,
                        "store": "AllCustomerStore",
                        "storeClassName": "SIS.store.AllCustomerStore",
                        "triggerCls": "x-form-search-trigger",
                        "typeAhead": true,
                        "valueField": "ID"
                    },
                    "designerId": "9587a7dc-1daf-424b-80cd-e76e1d52d334",
                    "customConfigs": [
                        {
                            "group": "(Custom Properties)",
                            "name": "storeClassName",
                            "type": "string"
                        }
                    ],
                    "cn": [
                        {
                            "type": "basiceventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onTxtNameChange",
                                "implHandler": [
                                    "var form = this;\r",
                                    "\r",
                                    "var btnClear = FindControl(form, 'btnClear');\r",
                                    "\r",
                                    "if(!IsNullOrEmpty(field.getSelectedRecord()))\r",
                                    "{\r",
                                    "    btnClear.setVisible(true);\r",
                                    "}"
                                ],
                                "name": "change",
                                "scope": "me"
                            },
                            "designerId": "4be4f3c0-6778-4444-b535-88aa552ad9ff"
                        },
                        {
                            "type": "basiceventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onCmbNameSelect",
                                "implHandler": [
                                    "var form = this;\r",
                                    "\r",
                                    "var grdCustomers = FindControl(form, 'grdCustomers');\r",
                                    "grdCustomers.getStore().clearExtraParams();\r",
                                    "grdCustomers.getStore().removeAll();\r",
                                    "grdCustomers.getStore().addExtraParams({\r",
                                    "    filter: {\r",
                                    "        Name: combo.getSelectedRecord().get('Name')\r",
                                    "    }\r",
                                    "});\r",
                                    "\r",
                                    "grdCustomers.getStore().loadPage(1);"
                                ],
                                "name": "select",
                                "scope": "me"
                            },
                            "designerId": "ce05ab1a-b15e-44c1-9a06-864633e6df0f"
                        },
                        {
                            "type": "basiceventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onCmbNameAfterRender",
                                "implHandler": [
                                    "var form = this;\r",
                                    "\r",
                                    "var grdCustomers = FindControl(form, 'grdCustomers');\r",
                                    "\r",
                                    "grdCustomers.getStore().clearExtraParams();\r",
                                    "grdCustomers.getStore().removeAll();\r",
                                    "\r",
                                    "grdCustomers.getStore().loadPage(1);"
                                ],
                                "name": "afterrender",
                                "scope": "me"
                            },
                            "designerId": "720fe286-9e95-45d1-aa13-2de148401cc3"
                        }
                    ]
                },
                {
                    "type": "Ext.button.Button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "hidden": true,
                        "iconCls": "icon-clear",
                        "itemId": "btnClear",
                        "layout|flex": null,
                        "margin": "0 0 0 15",
                        "text": "",
                        "tooltip": [
                            "გასუფთავება"
                        ]
                    },
                    "designerId": "ba87bcb8-83b3-4f09-bc6a-b73d8080af0f",
                    "cn": [
                        {
                            "type": "basiceventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onBtnClearClick",
                                "implHandler": [
                                    "var form = this;\r",
                                    "\r",
                                    "var cmbName = FindControl(form, 'cmbName');\r",
                                    "cmbName.reset();\r",
                                    "\r",
                                    "button.setVisible(false);\r",
                                    "\r",
                                    "var grdCustomers = FindControl(form, 'grdCustomers');\r",
                                    "\r",
                                    "grdCustomers.getStore().clearExtraParams();\r",
                                    "grdCustomers.getStore().removeAll();\r",
                                    "\r",
                                    "grdCustomers.getStore().loadPage(1);"
                                ],
                                "name": "click",
                                "scope": "me"
                            },
                            "designerId": "36495883-1830-4f9b-95a0-db9e9eae1e58"
                        }
                    ]
                }
            ]
        },
        {
            "type": "Ext.grid.Panel",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "itemId": "grdCustomers",
                "layout|flex": 1,
                "margin": "10 10 10 10",
                "normalViewConfig": null,
                "store": "AllCustomerStore",
                "storeClassName": "SIS.store.AllCustomerStore",
                "title": ""
            },
            "designerId": "a40d6ac8-0128-478d-9370-15aa6a0af7d8",
            "customConfigs": [
                {
                    "group": "(Custom Properties)",
                    "name": "storeClassName",
                    "type": "string"
                }
            ],
            "cn": [
                {
                    "type": "Ext.grid.View",
                    "reference": {
                        "name": "viewConfig",
                        "type": "object"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "stripeRows": false
                    },
                    "designerId": "32dc44c5-2e04-470b-827d-19a2c27a05f1",
                    "cn": [
                        {
                            "type": "fixedfunction",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "designer|params": [
                                    "record",
                                    "rowIndex",
                                    "rowParams",
                                    "store"
                                ],
                                "fn": "getRowClass",
                                "implHandler": [
                                    "return record.get('Deleted') === true ? 'deleted-row' : 'normal-row';"
                                ]
                            },
                            "designerId": "2f65a341-7991-4ed8-b444-2aeed10bcc7d"
                        }
                    ]
                },
                {
                    "type": "Ext.toolbar.Paging",
                    "reference": {
                        "name": "dockedItems",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "afterPageText": "{0}-დან",
                        "beforePageText": "გვერდი",
                        "displayInfo": true,
                        "displayMsg": "ნაჩვენებია {0} - {1} სულ  {2}",
                        "dock": "bottom",
                        "emptyMsg": "მონაცემები არ არის",
                        "firstText": "პირველი გვერდი",
                        "lastText": "ბოლო გვერდი",
                        "nextText": "შემდეგი გვერდი",
                        "prevText": "წინა გვერდი",
                        "refreshText": "განახლება",
                        "store": "AllCustomerStore",
                        "storeClassName": "SIS.store.AllCustomerStore",
                        "width": 360
                    },
                    "designerId": "ecff0b6d-63e6-4dc5-9ae5-b072d90e38ed",
                    "customConfigs": [
                        {
                            "group": "(Custom Properties)",
                            "name": "storeClassName",
                            "type": "string"
                        }
                    ]
                },
                {
                    "type": "Ext.grid.column.Column",
                    "reference": {
                        "name": "columns",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "dataIndex": "Name",
                        "flex": 1,
                        "text": "დასახელება"
                    },
                    "designerId": "12280703-ede2-450f-9b91-819636fbd30a"
                },
                {
                    "type": "Ext.grid.column.Column",
                    "reference": {
                        "name": "columns",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "dataIndex": "Code",
                        "flex": 1,
                        "text": "საიდენტიფიკაციო ნომერი",
                        "width": null
                    },
                    "designerId": "73ab4de5-b522-403d-8795-f55f22671996"
                },
                {
                    "type": "Ext.grid.column.Column",
                    "reference": {
                        "name": "columns",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "dataIndex": "Address",
                        "flex": 1,
                        "text": "მისამართი",
                        "width": null
                    },
                    "designerId": "e7b92080-8b8c-4b10-a6f6-3dbe83bc6a96"
                }
            ]
        }
    ]
}