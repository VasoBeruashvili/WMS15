{
    "type": "Ext.panel.Panel",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "border": false,
        "container|align": "stretch",
        "designer|userAlias": "distributors",
        "designer|userClassName": "Distributors",
        "height": 599,
        "icon": null,
        "iconCls": "",
        "keyMapConfig": [
            "{\r",
            "    bindings: [\r",
            "        {\r",
            "            ctrl: false,\r",
            "            key: Ext.EventObject.ESC,\r",
            "            btnItemId: 'btnClear'\r",
            "        }\r",
            "    ]\r",
            "}"
        ],
        "layout": "vbox",
        "title": "",
        "width": 746
    },
    "configAlternates": {
        "keyMapConfig": "object"
    },
    "designerId": "0a7c5c52-8a12-444b-b3e3-0a93e456cfb0",
    "customConfigs": [
        {
            "group": "(Custom Properties)",
            "name": "keyMapConfig",
            "type": "string"
        }
    ],
    "cn": [
        {
            "type": "Ext.container.Container",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "container|align": "stretch",
                "layout": "hbox",
                "layout|flex": null,
                "margin": "10 10 0 10"
            },
            "designerId": "acf933cf-bbf8-4814-9185-13419c59cc34",
            "cn": [
                {
                    "type": "Ext.button.Button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "iconCls": "icon-add",
                        "itemId": "btnAdd",
                        "margin": "0 10 0 0",
                        "text": "",
                        "tooltip": [
                            "დამატება"
                        ]
                    },
                    "designerId": "c9273ed9-dcad-427b-b8f5-ffe2e40f8fc2",
                    "cn": [
                        {
                            "type": "basiceventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onBtnAddClick",
                                "implHandler": [
                                    "var form = button.up('distributors');\r",
                                    "var grdDistributors = FindControl(form, 'grdDistributors');\r",
                                    "var record = Ext.create('SIS.model.DistributorModel');\r",
                                    "\r",
                                    "var win = Ext.create('SIS.view.AddDistributor', {\r",
                                    "    formModel: record,\r",
                                    "    animateTarget: button,\r",
                                    "    save: function(model){\r",
                                    "        var data = ModelToJson(model);\r",
                                    "        Request(\r",
                                    "            '/Home/SaveDistributor',\r",
                                    "            data,\r",
                                    "            function(response)\r",
                                    "            {\r",
                                    "                grdDistributors.getStore().load();\r",
                                    "            }\r",
                                    "        );\r",
                                    "    }\r",
                                    "});\r",
                                    "\r",
                                    "win.setRecord();\r",
                                    "win.show();"
                                ],
                                "name": "click",
                                "scope": "me"
                            },
                            "designerId": "a0335ff0-38c0-4139-a749-af715dd61236"
                        }
                    ]
                },
                {
                    "type": "Ext.button.Button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "iconCls": "icon-edit",
                        "itemId": "btnEdit",
                        "margin": "0 5 0 0",
                        "scale": null,
                        "text": "",
                        "tooltip": [
                            "რედაქტირება\r",
                            ""
                        ]
                    },
                    "designerId": "d818bd3d-052e-4d04-9f9f-45dac6e5ff6c",
                    "cn": [
                        {
                            "type": "basiceventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onBtnEditClick",
                                "implHandler": [
                                    "var form = button.up('distributors');\r",
                                    "var grdDistributors = FindControl(form, 'grdDistributors');\r",
                                    "var record = grdDistributors.getSelectedRecord();\r",
                                    "\r",
                                    "if(IsNullOrEmpty(record))\r",
                                    "{\r",
                                    "    Ext.MessageBox.show({\r",
                                    "        title: 'მომწოდებლის რედაქტირება',\r",
                                    "        msg: '<center>მომწოდებელი არ არის მონიშნული</center>',\r",
                                    "        width:300,\r",
                                    "        iconCls: 'icon-edit',\r",
                                    "        buttons: Ext.MessageBox.OK,\r",
                                    "        animateTarget: button\r",
                                    "    });\r",
                                    "}\r",
                                    "else\r",
                                    "{\r",
                                    "    var win = Ext.create('SIS.view.AddDistributor', {\r",
                                    "        formModel: record,\r",
                                    "        iconCls: 'icon-edit',\r",
                                    "        save: function(model){\r",
                                    "            var data = ModelToJson(model);\r",
                                    "            Request(\r",
                                    "                '/Home/SaveDistributor',\r",
                                    "                data,\r",
                                    "                function(response)\r",
                                    "                {\r",
                                    "                    grdDistributors.getStore().load();\r",
                                    "                }\r",
                                    "            );\r",
                                    "        },\r",
                                    "        animateTarget: button\r",
                                    "    });\r",
                                    "\r",
                                    "    win.setTitle('მომწოდებლის რედაქტირება');\r",
                                    "    win.setRecord();\r",
                                    "    win.show();\r",
                                    "}"
                                ],
                                "name": "click",
                                "scope": "me"
                            },
                            "designerId": "d4e341ef-2e8f-4506-9bc1-26c82f928e6c"
                        }
                    ]
                },
                {
                    "type": "Ext.container.Container",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|flex": 1.5
                    },
                    "designerId": "81a10f4f-70bd-4998-a784-30cc8136e4c7"
                },
                {
                    "type": "Ext.form.field.ComboBox",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "clearCls": "x-form-clear-trigger",
                        "cls": null,
                        "displayField": "Name",
                        "emptyCls": null,
                        "emptyText": "დასახელება",
                        "enableKeyEvents": true,
                        "fieldLabel": null,
                        "itemId": "cmbName",
                        "layout|flex": 1,
                        "minChars": 1,
                        "selectOnFocus": true,
                        "store": "AllDistributorStore",
                        "storeClassName": "SIS.store.AllDistributorStore",
                        "triggerCls": "x-form-search-trigger",
                        "typeAhead": true,
                        "valueField": "ID"
                    },
                    "designerId": "569a0251-f201-45f0-8df1-b7af30d1e499",
                    "customConfigs": [
                        {
                            "group": "(Custom Properties)",
                            "name": "storeClassName",
                            "type": "string"
                        }
                    ],
                    "cn": [
                        {
                            "type": "basiceventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onTxtNameChange",
                                "implHandler": [
                                    "var form = this;\r",
                                    "\r",
                                    "var btnClear = FindControl(form, 'btnClear');\r",
                                    "\r",
                                    "if(!IsNullOrEmpty(field.getSelectedRecord()))\r",
                                    "{\r",
                                    "    btnClear.setVisible(true);\r",
                                    "}"
                                ],
                                "name": "change",
                                "scope": "me"
                            },
                            "designerId": "a9cf5cb0-63ab-4f8d-9b9b-45632ac3531e"
                        },
                        {
                            "type": "basiceventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onCmbNameSelect",
                                "implHandler": [
                                    "var form = this;\r",
                                    "\r",
                                    "var grdDistributors = FindControl(form, 'grdDistributors');\r",
                                    "grdDistributors.getStore().clearExtraParams();\r",
                                    "grdDistributors.getStore().removeAll();\r",
                                    "grdDistributors.getStore().addExtraParams({\r",
                                    "    filter: {\r",
                                    "        Name: combo.getSelectedRecord().get('Name')\r",
                                    "    }\r",
                                    "});\r",
                                    "\r",
                                    "grdDistributors.getStore().loadPage(1);"
                                ],
                                "name": "select",
                                "scope": "me"
                            },
                            "designerId": "2650eb76-9f92-4455-bbe8-beb7867e1487"
                        },
                        {
                            "type": "basiceventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onCmbNameAfterRender",
                                "implHandler": [
                                    "var form = this;\r",
                                    "\r",
                                    "var grdDistributors = FindControl(form, 'grdDistributors');\r",
                                    "\r",
                                    "grdDistributors.getStore().clearExtraParams();\r",
                                    "grdDistributors.getStore().removeAll();\r",
                                    "\r",
                                    "grdDistributors.getStore().loadPage(1);"
                                ],
                                "name": "afterrender",
                                "scope": "me"
                            },
                            "designerId": "0dc829e2-2f96-46be-b557-cb570b1ac028"
                        }
                    ]
                },
                {
                    "type": "Ext.button.Button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "hidden": true,
                        "iconCls": "icon-clear",
                        "itemId": "btnClear",
                        "layout|flex": null,
                        "margin": "0 0 0 15",
                        "text": "",
                        "tooltip": [
                            "გასუფთავება"
                        ]
                    },
                    "designerId": "326bfc4d-f319-4141-ba6a-53530d81c3f6",
                    "cn": [
                        {
                            "type": "basiceventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onBtnClearClick",
                                "implHandler": [
                                    "var form = this;\r",
                                    "\r",
                                    "var cmbName = FindControl(form, 'cmbName');\r",
                                    "cmbName.reset();\r",
                                    "\r",
                                    "button.setVisible(false);\r",
                                    "\r",
                                    "var grdDistributors = FindControl(form, 'grdDistributors');\r",
                                    "\r",
                                    "grdDistributors.getStore().clearExtraParams();\r",
                                    "grdDistributors.getStore().removeAll();\r",
                                    "\r",
                                    "grdDistributors.getStore().loadPage(1);"
                                ],
                                "name": "click",
                                "scope": "me"
                            },
                            "designerId": "1c68b6f7-b505-428c-adc8-a8586037289e"
                        }
                    ]
                }
            ]
        },
        {
            "type": "Ext.grid.Panel",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "itemId": "grdDistributors",
                "layout|flex": 1,
                "margin": "10 10 10 10",
                "normalViewConfig": null,
                "store": "AllDistributorStore",
                "storeClassName": "SIS.store.AllDistributorStore",
                "title": ""
            },
            "designerId": "f892681f-101d-4465-a902-74d878ecdea8",
            "customConfigs": [
                {
                    "group": "(Custom Properties)",
                    "name": "storeClassName",
                    "type": "string"
                }
            ],
            "cn": [
                {
                    "type": "Ext.grid.View",
                    "reference": {
                        "name": "viewConfig",
                        "type": "object"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "stripeRows": false
                    },
                    "designerId": "85b19a2d-7659-4820-89f5-eba91d83aa1f",
                    "cn": [
                        {
                            "type": "fixedfunction",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "designer|params": [
                                    "record",
                                    "rowIndex",
                                    "rowParams",
                                    "store"
                                ],
                                "fn": "getRowClass",
                                "implHandler": [
                                    "return record.get('Deleted') === true ? 'deleted-row' : 'normal-row';"
                                ]
                            },
                            "designerId": "9a2c6aca-0f04-484a-abbe-009459941c91"
                        }
                    ]
                },
                {
                    "type": "Ext.toolbar.Paging",
                    "reference": {
                        "name": "dockedItems",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "afterPageText": "{0}-დან",
                        "beforePageText": "გვერდი",
                        "displayInfo": true,
                        "displayMsg": "ნაჩვენებია {0} - {1} სულ  {2}",
                        "dock": "bottom",
                        "emptyMsg": "მონაცემები არ არის",
                        "firstText": "პირველი გვერდი",
                        "lastText": "ბოლო გვერდი",
                        "nextText": "შემდეგი გვერდი",
                        "prevText": "წინა გვერდი",
                        "refreshText": "განახლება",
                        "store": "AllDistributorStore",
                        "storeClassName": "SIS.store.AllDistributorStore",
                        "width": 360
                    },
                    "designerId": "27c2f0a9-d196-465f-b193-3761e4737b78",
                    "customConfigs": [
                        {
                            "group": "(Custom Properties)",
                            "name": "storeClassName",
                            "type": "string"
                        }
                    ]
                },
                {
                    "type": "Ext.grid.column.Column",
                    "reference": {
                        "name": "columns",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "dataIndex": "Name",
                        "flex": 1,
                        "text": "დასახელება"
                    },
                    "designerId": "e5ef82e0-345b-4ccf-ab8c-3829949e7a68"
                },
                {
                    "type": "Ext.grid.column.Column",
                    "reference": {
                        "name": "columns",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "dataIndex": "Code",
                        "flex": 1,
                        "text": "საიდენტიფიკაციო ნომერი",
                        "width": null
                    },
                    "designerId": "c17de1d7-d58a-4c07-9afd-60d262658730"
                },
                {
                    "type": "Ext.grid.column.Column",
                    "reference": {
                        "name": "columns",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "dataIndex": "Address",
                        "flex": 1,
                        "text": "მისამართი",
                        "width": null
                    },
                    "designerId": "4cbe0ed5-9d1f-4bd5-a713-82ca8bb7e27f"
                }
            ]
        }
    ]
}