{
    "type": "Ext.panel.Panel",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "border": false,
        "container|align": "stretch",
        "designer|userAlias": "products",
        "designer|userClassName": "Products",
        "height": 599,
        "icon": null,
        "iconCls": "",
        "keyMapConfig": [
            "{\r",
            "    bindings: [\r",
            "        {\r",
            "            ctrl: false,\r",
            "            key: Ext.EventObject.ESC,\r",
            "            btnItemId: 'btnClear'\r",
            "        }\r",
            "    ]\r",
            "}"
        ],
        "layout": "vbox",
        "title": "",
        "width": 746
    },
    "configAlternates": {
        "keyMapConfig": "object"
    },
    "designerId": "07769c1f-64cd-4e8d-bad2-2d27f9a24a19",
    "customConfigs": [
        {
            "group": "(Custom Properties)",
            "name": "keyMapConfig",
            "type": "string"
        }
    ],
    "cn": [
        {
            "type": "Ext.container.Container",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "container|align": "stretch",
                "layout": "hbox",
                "layout|flex": null,
                "margin": "10 10 0 10"
            },
            "designerId": "86bdff52-55aa-48b5-a568-24c2e31cf0ed",
            "cn": [
                {
                    "type": "Ext.button.Button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "iconCls": "icon-add",
                        "itemId": "btnAdd",
                        "margin": "0 10 0 0",
                        "text": "",
                        "tooltip": [
                            "დამატება"
                        ]
                    },
                    "designerId": "a55da7d1-612a-4d17-b0b9-abdd22afe218",
                    "cn": [
                        {
                            "type": "basiceventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onBtnAddClick",
                                "implHandler": [
                                    "var form = button.up('products');\r",
                                    "var grdProducts = FindControl(form, 'grdProducts');\r",
                                    "var record = Ext.create('SIS.model.ProductModel');\r",
                                    "\r",
                                    "var win = Ext.create('SIS.view.AddProduct', {\r",
                                    "    formModel: record,\r",
                                    "    animateTarget: button,\r",
                                    "    save: function(model){\r",
                                    "        var data = ModelToJson(model);\r",
                                    "        Request(\r",
                                    "            '/Home/SaveProduct',\r",
                                    "            data,\r",
                                    "            function(response)\r",
                                    "            {\r",
                                    "                grdProducts.getStore().load();\r",
                                    "            }\r",
                                    "        );\r",
                                    "    }\r",
                                    "});\r",
                                    "\r",
                                    "win.setRecord();\r",
                                    "win.show();"
                                ],
                                "name": "click",
                                "scope": "me"
                            },
                            "designerId": "95448702-2a5a-4051-b9bd-097648576a46"
                        }
                    ]
                },
                {
                    "type": "Ext.button.Button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "iconCls": "icon-edit",
                        "itemId": "btnEdit",
                        "margin": "0 5 0 0",
                        "scale": null,
                        "text": "",
                        "tooltip": [
                            "რედაქტირება\r",
                            ""
                        ]
                    },
                    "designerId": "0e185a29-2a69-4a22-abe9-21290ddc3994",
                    "cn": [
                        {
                            "type": "basiceventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onBtnEditClick",
                                "implHandler": [
                                    "var form = button.up('products');\r",
                                    "var grdProducts = FindControl(form, 'grdProducts');\r",
                                    "var record = grdProducts.getSelectedRecord();\r",
                                    "\r",
                                    "if(IsNullOrEmpty(record))\r",
                                    "{\r",
                                    "    Ext.MessageBox.show({\r",
                                    "        title: 'საქონლის რედაქტირება',\r",
                                    "        msg: '<center>საქონელი არ არის მონიშნული</center>',\r",
                                    "        width:300,\r",
                                    "        iconCls: 'icon-edit',\r",
                                    "        buttons: Ext.MessageBox.OK,\r",
                                    "        animateTarget: button\r",
                                    "    });\r",
                                    "}\r",
                                    "else\r",
                                    "{\r",
                                    "    var win = Ext.create('SIS.view.AddProduct', {\r",
                                    "        formModel: record,\r",
                                    "        iconCls: 'icon-edit',\r",
                                    "        save: function(model){\r",
                                    "            var data = ModelToJson(model);\r",
                                    "            Request(\r",
                                    "                '/Home/SaveProduct',\r",
                                    "                data,\r",
                                    "                function(response)\r",
                                    "                {\r",
                                    "                    grdProducts.getStore().load();\r",
                                    "                }\r",
                                    "            );\r",
                                    "        },\r",
                                    "        animateTarget: button\r",
                                    "    });\r",
                                    "\r",
                                    "    win.setTitle('საქონლის რედაქტირება');\r",
                                    "    win.setRecord();\r",
                                    "    win.show();\r",
                                    "}"
                                ],
                                "name": "click",
                                "scope": "me"
                            },
                            "designerId": "f39957ea-f495-412f-833d-1fffca79e99e"
                        }
                    ]
                },
                {
                    "type": "Ext.container.Container",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|flex": 1.5
                    },
                    "designerId": "e0b09012-2136-4106-a40f-8193a5eb2093"
                },
                {
                    "type": "Ext.form.field.ComboBox",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "clearCls": "x-form-clear-trigger",
                        "cls": null,
                        "displayField": "Name",
                        "emptyCls": null,
                        "emptyText": "დასახელება",
                        "enableKeyEvents": true,
                        "fieldLabel": null,
                        "itemId": "cmbName",
                        "layout|flex": 1,
                        "minChars": 1,
                        "selectOnFocus": true,
                        "store": "AllProductStore",
                        "storeClassName": "SIS.store.AllProductStore",
                        "triggerCls": "x-form-search-trigger",
                        "typeAhead": true,
                        "valueField": "ID"
                    },
                    "designerId": "5d93103b-28a5-4333-880b-a462ca52ef0f",
                    "customConfigs": [
                        {
                            "group": "(Custom Properties)",
                            "name": "storeClassName",
                            "type": "string"
                        }
                    ],
                    "cn": [
                        {
                            "type": "basiceventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onTxtNameChange",
                                "implHandler": [
                                    "var form = this;\r",
                                    "\r",
                                    "var btnClear = FindControl(form, 'btnClear');\r",
                                    "\r",
                                    "if(!IsNullOrEmpty(field.getSelectedRecord()))\r",
                                    "{\r",
                                    "    btnClear.setVisible(true);\r",
                                    "}"
                                ],
                                "name": "change",
                                "scope": "me"
                            },
                            "designerId": "2067e06e-340c-42b7-884c-5e5389d78073"
                        },
                        {
                            "type": "basiceventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onCmbNameSelect",
                                "implHandler": [
                                    "var form = this;\r",
                                    "\r",
                                    "var grdProducts = FindControl(form, 'grdProducts');\r",
                                    "grdProducts.getStore().clearExtraParams();\r",
                                    "grdProducts.getStore().removeAll();\r",
                                    "grdProducts.getStore().addExtraParams({\r",
                                    "    filter: {\r",
                                    "        Name: combo.getSelectedRecord().get('Name')\r",
                                    "    }\r",
                                    "});\r",
                                    "\r",
                                    "grdProducts.getStore().loadPage(1);"
                                ],
                                "name": "select",
                                "scope": "me"
                            },
                            "designerId": "4a1964fc-9fb4-4753-907b-7e3c2cb6482d"
                        },
                        {
                            "type": "basiceventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onCmbNameAfterRender",
                                "implHandler": [
                                    "var form = this;\r",
                                    "\r",
                                    "var grdProducts = FindControl(form, 'grdProducts');\r",
                                    "\r",
                                    "grdProducts.getStore().clearExtraParams();\r",
                                    "grdProducts.getStore().removeAll();\r",
                                    "\r",
                                    "grdProducts.getStore().loadPage(1);"
                                ],
                                "name": "afterrender",
                                "scope": "me"
                            },
                            "designerId": "bffc8f3c-3c09-45f3-8055-f7642b5d965d"
                        }
                    ]
                },
                {
                    "type": "Ext.button.Button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "hidden": true,
                        "iconCls": "icon-clear",
                        "itemId": "btnClear",
                        "layout|flex": null,
                        "margin": "0 0 0 15",
                        "text": "",
                        "tooltip": [
                            "გასუფთავება"
                        ]
                    },
                    "designerId": "03acdd6c-14c9-4f8d-99c9-62209c8621e0",
                    "cn": [
                        {
                            "type": "basiceventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onBtnClearClick",
                                "implHandler": [
                                    "var form = this;\r",
                                    "\r",
                                    "var cmbName = FindControl(form, 'cmbName');\r",
                                    "cmbName.reset();\r",
                                    "\r",
                                    "button.setVisible(false);\r",
                                    "\r",
                                    "var grdProducts = FindControl(form, 'grdProducts');\r",
                                    "\r",
                                    "grdProducts.getStore().clearExtraParams();\r",
                                    "grdProducts.getStore().removeAll();\r",
                                    "\r",
                                    "grdProducts.getStore().loadPage(1);"
                                ],
                                "name": "click",
                                "scope": "me"
                            },
                            "designerId": "6e47b9e6-b832-4b4a-a2b2-23d2560e73c1"
                        }
                    ]
                }
            ]
        },
        {
            "type": "Ext.grid.Panel",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "itemId": "grdProducts",
                "layout|flex": 1,
                "margin": "10 10 10 10",
                "normalViewConfig": null,
                "store": "AllProductStore",
                "storeClassName": "SIS.store.AllProductStore",
                "title": ""
            },
            "designerId": "6e60a290-8801-4035-ae7b-f9147a1fcf09",
            "customConfigs": [
                {
                    "group": "(Custom Properties)",
                    "name": "storeClassName",
                    "type": "string"
                }
            ],
            "cn": [
                {
                    "type": "Ext.grid.View",
                    "reference": {
                        "name": "viewConfig",
                        "type": "object"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "stripeRows": false
                    },
                    "designerId": "bec40a49-3d5d-47ba-b4c3-b8d391a48e7e",
                    "cn": [
                        {
                            "type": "fixedfunction",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "designer|params": [
                                    "record",
                                    "rowIndex",
                                    "rowParams",
                                    "store"
                                ],
                                "fn": "getRowClass",
                                "implHandler": [
                                    "return record.get('Deleted') === true ? 'deleted-row' : 'normal-row';"
                                ]
                            },
                            "designerId": "662ddb0b-d352-4013-b662-6f99d2f53245"
                        }
                    ]
                },
                {
                    "type": "Ext.toolbar.Paging",
                    "reference": {
                        "name": "dockedItems",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "afterPageText": "{0}-დან",
                        "beforePageText": "გვერდი",
                        "displayInfo": true,
                        "displayMsg": "ნაჩვენებია {0} - {1} სულ  {2}",
                        "dock": "bottom",
                        "emptyMsg": "მონაცემები არ არის",
                        "firstText": "პირველი გვერდი",
                        "lastText": "ბოლო გვერდი",
                        "nextText": "შემდეგი გვერდი",
                        "prevText": "წინა გვერდი",
                        "refreshText": "განახლება",
                        "store": "AllProductStore",
                        "storeClassName": "SIS.store.AllProductStore",
                        "width": 360
                    },
                    "designerId": "cbd79da0-0ba6-4db3-bbaa-65bbc994809f",
                    "customConfigs": [
                        {
                            "group": "(Custom Properties)",
                            "name": "storeClassName",
                            "type": "string"
                        }
                    ]
                },
                {
                    "type": "Ext.grid.column.Column",
                    "reference": {
                        "name": "columns",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "dataIndex": "Name",
                        "flex": 1,
                        "text": "დასახელება"
                    },
                    "designerId": "081e2ff5-b7ff-4a7a-bab8-9d50789da833"
                },
                {
                    "type": "Ext.grid.column.Column",
                    "reference": {
                        "name": "columns",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "dataIndex": "CurrentAmount",
                        "flex": 1,
                        "hidden": null,
                        "text": "მიმდინარე რაოდენობა",
                        "width": null
                    },
                    "designerId": "786723cf-7be1-4ca3-af69-138e428be7e1"
                },
                {
                    "type": "Ext.grid.column.Column",
                    "reference": {
                        "name": "columns",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "dataIndex": "SizeUnitName",
                        "flex": 1,
                        "text": "ზომის ერთეული"
                    },
                    "designerId": "a00ed5e5-9425-41da-ac1b-4eab3d8d0a5f"
                },
                {
                    "type": "Ext.grid.column.Column",
                    "reference": {
                        "name": "columns",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "dataIndex": "TotalPrice",
                        "flex": 1,
                        "hidden": null,
                        "text": "ღირებულება",
                        "width": null
                    },
                    "designerId": "bfe4eca9-b0bc-4854-a329-1b5dfce42b9f",
                    "cn": [
                        {
                            "type": "fixedfunction",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "designer|params": [
                                    "value",
                                    "metaData",
                                    "record",
                                    "rowIndex",
                                    "colIndex",
                                    "store",
                                    "view"
                                ],
                                "fn": "renderer",
                                "implHandler": [
                                    "return record.get('TotalPrice') + ' ლარი';"
                                ]
                            },
                            "designerId": "ee9415bf-3421-41a8-89ed-aee43f3be273"
                        }
                    ]
                }
            ]
        }
    ]
}