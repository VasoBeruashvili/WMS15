{
    "type": "Ext.panel.Panel",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "border": false,
        "container|align": "stretch",
        "designer|userAlias": "outcomeproducts",
        "designer|userClassName": "OutcomeProducts",
        "height": 465,
        "keyMapConfig": [
            "{\r",
            "    bindings: [\r",
            "        {\r",
            "            ctrl: false,\r",
            "            key: Ext.EventObject.ENTER,\r",
            "            btnItemId: 'btnSave'\r",
            "        },\r",
            "        {\r",
            "            ctrl: true,\r",
            "            key: Ext.EventObject.ENTER,\r",
            "            btnItemId: 'btnExcel'\r",
            "        }\r",
            "    ]\r",
            "}"
        ],
        "layout": "vbox",
        "title": "",
        "width": 970
    },
    "configAlternates": {
        "keyMapConfig": "object"
    },
    "designerId": "1d16374a-13e3-447a-8af9-cf8cc0952fc1",
    "customConfigs": [
        {
            "group": "(Custom Properties)",
            "name": "keyMapConfig",
            "type": "string"
        }
    ],
    "cn": [
        {
            "type": "Ext.container.Container",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "container|align": "stretch",
                "layout": "vbox",
                "layout|flex": null,
                "margin": "5 10 0 10"
            },
            "designerId": "c6362b49-4ef0-4dd8-8157-03149460de66",
            "cn": [
                {
                    "type": "Ext.form.FieldSet",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "collapsible": true,
                        "container|align": "stretch",
                        "layout": "vbox",
                        "layout|flex": null,
                        "margin": "0 0 0 0",
                        "title": "მყიდველი"
                    },
                    "designerId": "a193ad7b-3cbf-4bee-a23d-e561b588c224",
                    "cn": [
                        {
                            "type": "Ext.container.Container",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "container|align": "stretch",
                                "layout": "vbox",
                                "layout|flex": null
                            },
                            "designerId": "8f11c801-81b9-4d9b-a7f2-8056c8e91158",
                            "cn": [
                                {
                                    "type": "Ext.form.field.ComboBox",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "allowBlank": false,
                                        "displayField": "Name",
                                        "emptyText": null,
                                        "fieldLabel": "მყიდველი",
                                        "itemId": "cmbCustomers",
                                        "layout|flex": 1,
                                        "margin": "0 0 10 0",
                                        "minChars": 1,
                                        "selectOnFocus": true,
                                        "store": "ActiveCustomerStore",
                                        "storeClassName": "SIS.store.ActiveCustomerStore",
                                        "triggerCls": "x-form-search-trigger",
                                        "typeAhead": true,
                                        "valueField": "ID"
                                    },
                                    "designerId": "23a71c9f-f3cb-4f0d-87ee-e49038886fdb",
                                    "customConfigs": [
                                        {
                                            "group": "(Custom Properties)",
                                            "name": "storeClassName",
                                            "type": "string"
                                        }
                                    ],
                                    "cn": [
                                        {
                                            "type": "basiceventbinding",
                                            "reference": {
                                                "name": "listeners",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "fn": "onCmbDistributorsSelect",
                                                "implHandler": [
                                                    "var form = this;\r",
                                                    "\r",
                                                    "var txtCode = FindControl(form, 'txtCode');\r",
                                                    "var txtAddress = FindControl(form, 'txtAddress');\r",
                                                    "\r",
                                                    "var fsProducts = FindControl(form, 'fsProducts');\r",
                                                    "\r",
                                                    "var record = combo.getSelectedRecord();\r",
                                                    "\r",
                                                    "if(!IsNullOrEmpty(record))\r",
                                                    "{\r",
                                                    "    txtCode.setDisabled(false);\r",
                                                    "    txtAddress.setDisabled(false);\r",
                                                    "\r",
                                                    "    txtCode.setValue(record.get('Code'));\r",
                                                    "    txtAddress.setValue(record.get('Address'));\r",
                                                    "\r",
                                                    "    var txtAmount = FindControl(form, 'txtAmount');\r",
                                                    "    var txtInputPrice = FindControl(form, 'txtInputPrice');\r",
                                                    "    var txtOutputPrice = FindControl(form, 'txtOutputPrice');\r",
                                                    "    var txtTotalPrice = FindControl(form, 'txtTotalPrice');\r",
                                                    "\r",
                                                    "    txtAmount.regex = new RegExp('^[+-]?[0-9]+?$');\r",
                                                    "    txtOutputPrice.regex = new RegExp('^[+-]?[0-9]+(.[0-9]+)?$');\r",
                                                    "    txtTotalPrice.regex = new RegExp('^[+-]?[0-9]+(.[0-9]+)?$');\r",
                                                    "\r",
                                                    "    fsProducts.setVisible(true);\r",
                                                    "}"
                                                ],
                                                "name": "select",
                                                "scope": "me"
                                            },
                                            "designerId": "2e71fcb5-739b-4542-a763-b0e20ab7197d"
                                        }
                                    ]
                                },
                                {
                                    "type": "Ext.form.field.Text",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "allowBlank": false,
                                        "disabled": true,
                                        "emptyText": null,
                                        "fieldLabel": "კოდი",
                                        "itemId": "txtCode",
                                        "labelWidth": null,
                                        "layout|flex": 1,
                                        "margin": "0 0 0 0",
                                        "readOnly": true,
                                        "selectOnFocus": true
                                    },
                                    "designerId": "58aff92d-dfab-49a9-bf40-9a38c77bb3f2"
                                },
                                {
                                    "type": "Ext.form.field.Text",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "allowBlank": false,
                                        "disabled": true,
                                        "emptyText": null,
                                        "fieldLabel": "მისამართი",
                                        "itemId": "txtAddress",
                                        "labelWidth": null,
                                        "layout|flex": 1,
                                        "margin": "10 0 10 0",
                                        "readOnly": true,
                                        "selectOnFocus": true
                                    },
                                    "designerId": "f8cc3cc9-bda1-4194-9acd-8b1cc194743c"
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "Ext.form.FieldSet",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "collapsible": true,
                        "container|align": "stretch",
                        "disabled": null,
                        "hidden": true,
                        "itemId": "fsProducts",
                        "layout": "hbox",
                        "layout|flex": 1,
                        "margin": "0 0 0 0",
                        "title": "საქონელი"
                    },
                    "designerId": "babff97b-6c9c-45ae-b648-0449dfcf1f6d",
                    "cn": [
                        {
                            "type": "Ext.container.Container",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "container|align": "stretch",
                                "layout": "hbox",
                                "layout|flex": 1,
                                "margin": "-5 0 5 0"
                            },
                            "designerId": "89486e63-ad50-4820-acc4-c76473f0d9fa",
                            "cn": [
                                {
                                    "type": "Ext.container.Container",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "container|align": "stretch",
                                        "layout": "vbox",
                                        "layout|flex": 1,
                                        "margin": "0 10 0 0"
                                    },
                                    "designerId": "34b1ee53-fd95-498c-a405-1296897618b7",
                                    "cn": [
                                        {
                                            "type": "Ext.form.field.ComboBox",
                                            "reference": {
                                                "name": "items",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "allowBlank": false,
                                                "displayField": "Name",
                                                "emptyText": null,
                                                "fieldLabel": "დასახელება",
                                                "itemId": "cmbProducts",
                                                "layout|flex": null,
                                                "margin": "5 0 5 0",
                                                "minChars": 1,
                                                "selectOnFocus": true,
                                                "store": "ActiveProductStore",
                                                "storeClassName": "SIS.store.ActiveProductStore",
                                                "tpl": "<tpl for=\".\"><div class=\"x-boundlist-item\" >{Name} <span style=\"color: red\"><b>{CurrentAmount}</b></span> <b>{SizeUnitName} <b><span style=\"color: green\">{OutputPrice}</span> ლარი</b></b></div></tpl>",
                                                "triggerCls": "x-form-search-trigger",
                                                "typeAhead": true,
                                                "valueField": "ID"
                                            },
                                            "designerId": "0bc4b386-e317-4f38-9965-ede844173a49",
                                            "customConfigs": [
                                                {
                                                    "group": "(Custom Properties)",
                                                    "name": "storeClassName",
                                                    "type": "string"
                                                },
                                                {
                                                    "group": "(Custom Properties)",
                                                    "name": "tpl",
                                                    "type": "string"
                                                }
                                            ],
                                            "cn": [
                                                {
                                                    "type": "basiceventbinding",
                                                    "reference": {
                                                        "name": "listeners",
                                                        "type": "array"
                                                    },
                                                    "codeClass": null,
                                                    "userConfig": {
                                                        "fn": "onCmbProductsSelect",
                                                        "implHandler": [
                                                            "var form = this;\r",
                                                            "\r",
                                                            "var txtSizeUnit = FindControl(form, 'txtSizeUnit');\r",
                                                            "\r",
                                                            "var record = combo.getSelectedRecord();\r",
                                                            "\r",
                                                            "if(!IsNullOrEmpty(record))\r",
                                                            "{\r",
                                                            "    var txtAmount = FindControl(form, 'txtAmount');\r",
                                                            "    var txtOutputPrice = FindControl(form, 'txtOutputPrice');\r",
                                                            "    var txtTotalPrice = FindControl(form, 'txtTotalPrice');\r",
                                                            "\r",
                                                            "    txtSizeUnit.setDisabled(false);\r",
                                                            "    txtAmount.setDisabled(false);\r",
                                                            "    txtOutputPrice.setDisabled(false);\r",
                                                            "    txtTotalPrice.setDisabled(false);\r",
                                                            "\r",
                                                            "    txtSizeUnit.setValue(record.get('SizeUnitName'));\r",
                                                            "    txtOutputPrice.setValue(record.get('OutputPrice'));\r",
                                                            "}"
                                                        ],
                                                        "name": "select",
                                                        "scope": "me"
                                                    },
                                                    "designerId": "1d84f412-60b7-4f06-a8f6-7bc40c299214"
                                                }
                                            ]
                                        },
                                        {
                                            "type": "Ext.form.field.Text",
                                            "reference": {
                                                "name": "items",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "allowBlank": false,
                                                "disabled": true,
                                                "emptyText": null,
                                                "fieldLabel": "ერთეული",
                                                "itemId": "txtSizeUnit",
                                                "labelWidth": null,
                                                "layout|flex": null,
                                                "margin": "5 0 5 0",
                                                "readOnly": true,
                                                "selectOnFocus": true
                                            },
                                            "designerId": "7383139d-060b-4755-bfdb-fbe9ef6ea524"
                                        },
                                        {
                                            "type": "Ext.form.field.Text",
                                            "reference": {
                                                "name": "items",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "allowBlank": false,
                                                "disabled": true,
                                                "emptyText": null,
                                                "fieldLabel": "რაოდენობა",
                                                "inputType": null,
                                                "itemId": "txtAmount",
                                                "labelWidth": null,
                                                "layout|flex": null,
                                                "margin": "5 0 5 0",
                                                "selectOnFocus": true,
                                                "vtype": null
                                            },
                                            "designerId": "b395cbae-991c-4c81-a565-3844dc005aa4",
                                            "cn": [
                                                {
                                                    "type": "basiceventbinding",
                                                    "reference": {
                                                        "name": "listeners",
                                                        "type": "array"
                                                    },
                                                    "codeClass": null,
                                                    "userConfig": {
                                                        "fn": "onTxtAmountChange",
                                                        "implHandler": [
                                                            "var form = this;\r",
                                                            "\r",
                                                            "var txtTotalPrice = FindControl(form, 'txtTotalPrice');\r",
                                                            "var txtOutputPrice = FindControl(form, 'txtOutputPrice');\r",
                                                            "\r",
                                                            "if(txtOutputPrice.getValue() !== null){\r",
                                                            "    var val = txtOutputPrice.getValue() * field.getValue();\r",
                                                            "\r",
                                                            "    txtTotalPrice.setValue(val);\r",
                                                            "}"
                                                        ],
                                                        "name": "change",
                                                        "scope": "me"
                                                    },
                                                    "designerId": "1538b9f3-f8ee-4a33-8452-d09caf95ea16"
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    "type": "Ext.container.Container",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "container|align": "stretch",
                                        "layout": "vbox",
                                        "layout|flex": 1
                                    },
                                    "designerId": "1c74d465-171e-4c98-8fdf-5b3b9a5ab759",
                                    "cn": [
                                        {
                                            "type": "Ext.form.field.Text",
                                            "reference": {
                                                "name": "items",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "allowBlank": false,
                                                "disabled": true,
                                                "emptyText": null,
                                                "fieldLabel": "რეალიზ. ფასი",
                                                "inputType": null,
                                                "itemId": "txtOutputPrice",
                                                "labelWidth": null,
                                                "layout|flex": null,
                                                "margin": "5 0 5 0",
                                                "readOnly": true,
                                                "selectOnFocus": true,
                                                "vtype": null
                                            },
                                            "designerId": "b563e5b1-9177-4fef-a977-364cb6b1f372"
                                        },
                                        {
                                            "type": "Ext.form.field.Text",
                                            "reference": {
                                                "name": "items",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "allowBlank": false,
                                                "disabled": true,
                                                "emptyText": null,
                                                "fieldLabel": "ღირებულება",
                                                "inputType": null,
                                                "itemId": "txtTotalPrice",
                                                "labelWidth": null,
                                                "layout|flex": null,
                                                "margin": "5 0 5 0",
                                                "readOnly": true,
                                                "selectOnFocus": true,
                                                "vtype": null
                                            },
                                            "designerId": "5fe7e1e8-79a6-423a-beb1-e0ee92ab80b2"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "Ext.container.Container",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "container|align": "stretch",
                                "layout": "vbox",
                                "layout|flex": null
                            },
                            "designerId": "89dc77ab-caee-4685-ad3f-6b4544a079eb",
                            "cn": [
                                {
                                    "type": "Ext.container.Container",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "layout|flex": 1
                                    },
                                    "designerId": "06b768e6-f56b-4fb1-804e-02a6665d2d73"
                                },
                                {
                                    "type": "Ext.container.Container",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "layout|flex": 1
                                    },
                                    "designerId": "63e2a748-8ec2-42ac-8ac9-b38aa3ec66a4",
                                    "cn": [
                                        {
                                            "type": "Ext.button.Button",
                                            "reference": {
                                                "name": "items",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "iconCls": "icon-save24",
                                                "itemId": "btnSave",
                                                "margin": "12 0 10 10",
                                                "scale": "medium",
                                                "text": "",
                                                "tooltip": [
                                                    "შენახვა"
                                                ]
                                            },
                                            "designerId": "9a2ac910-ad35-46b4-a951-8d812318c827",
                                            "cn": [
                                                {
                                                    "type": "basiceventbinding",
                                                    "reference": {
                                                        "name": "listeners",
                                                        "type": "array"
                                                    },
                                                    "codeClass": null,
                                                    "userConfig": {
                                                        "fn": "onBtnSaveClick",
                                                        "implHandler": [
                                                            "var form = this;\r",
                                                            "\r",
                                                            "var cmbCustomers = FindControl(form, 'cmbCustomers');\r",
                                                            "var cmbProducts = FindControl(form, 'cmbProducts');\r",
                                                            "var txtAmount = FindControl(form, 'txtAmount');\r",
                                                            "var txtSizeUnit = FindControl(form, 'txtSizeUnit');\r",
                                                            "var txtTotalPrice = FindControl(form, 'txtTotalPrice');\r",
                                                            "var txtOutputPrice = FindControl(form, 'txtOutputPrice');\r",
                                                            "\r",
                                                            "if(form.validate()){\r",
                                                            "    var operationModel = Ext.create('SIS.model.OperationModel');\r",
                                                            "    operationModel.set('IO', 'gayidva');\r",
                                                            "    operationModel.set('CustomerID', cmbCustomers.getValue());\r",
                                                            "\r",
                                                            "    var data = ModelToJson(operationModel);\r",
                                                            "    Request(\r",
                                                            "        '/Home/SaveOperation',\r",
                                                            "        data,\r",
                                                            "        function(response){\r",
                                                            "            var responseOperationModel = CreateModel(response, 'SIS.model.OperationModel');\r",
                                                            "\r",
                                                            "            var detailModel = Ext.create('SIS.model.DetailModel');\r",
                                                            "            detailModel.set('OperationID', responseOperationModel.get('ID'));\r",
                                                            "            detailModel.set('ProductID', cmbProducts.getValue());\r",
                                                            "            detailModel.set('OutputAmount', txtAmount.getValue());\r",
                                                            "            detailModel.set('OutputPrice', txtOutputPrice.getValue());\r",
                                                            "            detailModel.set('SizeUnitID', cmbProducts.getSelectedRecord().get('SizeUnitID'));\r",
                                                            "\r",
                                                            "            var data1 = ModelToJson(detailModel);\r",
                                                            "\r",
                                                            "            Request(\r",
                                                            "                '/Home/SaveDetailO',\r",
                                                            "                data1,\r",
                                                            "                function(response1){\r",
                                                            "                    var productModel = cmbProducts.getSelectedRecord();\r",
                                                            "\r",
                                                            "                    var realPrice = productModel.get('InputPrice') * txtAmount.getValue();\r",
                                                            "\r",
                                                            "                    productModel.set('CurrentAmount', txtAmount.getValue());\r",
                                                            "                    productModel.set('TotalPrice', txtTotalPrice.getValue());\r",
                                                            "                    productModel.set('RealPrice', realPrice);\r",
                                                            "                    productModel.set('ToChangeDown', true);\r",
                                                            "\r",
                                                            "                    var data2 = ModelToJson(productModel);\r",
                                                            "                    Request(\r",
                                                            "                        '/Home/SaveProduct',\r",
                                                            "                        data2,\r",
                                                            "                        function(response2){\r",
                                                            "                            form.getRecord(responseOperationModel.get('ID'));\r",
                                                            "                            form.resetForm();\r",
                                                            "                            cmbProducts.getStore().load();\r",
                                                            "                            cmbProducts.focus();\r",
                                                            "                            txtAmount.clearInvalid();\r",
                                                            "                            cmbProducts.clearInvalid();\r",
                                                            "                        }\r",
                                                            "                    );\r",
                                                            "                }\r",
                                                            "            );\r",
                                                            "        }\r",
                                                            "    );\r",
                                                            "}"
                                                        ],
                                                        "name": "click",
                                                        "scope": "me"
                                                    },
                                                    "designerId": "6eed90b4-acc5-45dc-8b7a-27d78bda1311"
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "type": "Ext.grid.Panel",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "itemId": "grdOutcomeProducts",
                "layout|flex": 1,
                "margin": "10 10 0 10",
                "store": "IncomeProductArrayStore",
                "storeClassName": "SIS.store.IncomeProductArrayStore",
                "title": ""
            },
            "designerId": "cec41e00-192e-44e8-818e-51b5a5bd1262",
            "customConfigs": [
                {
                    "group": "(Custom Properties)",
                    "name": "storeClassName",
                    "type": "string"
                }
            ],
            "cn": [
                {
                    "type": "Ext.grid.column.Column",
                    "reference": {
                        "name": "columns",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "dataIndex": "Name",
                        "flex": 1,
                        "menuDisabled": true,
                        "sortable": true,
                        "text": "დასახელება"
                    },
                    "designerId": "ac9f7ddc-479d-4279-92f1-9a58dfbd9c0e"
                },
                {
                    "type": "Ext.grid.column.Column",
                    "reference": {
                        "name": "columns",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "dataIndex": "Amount",
                        "flex": 1,
                        "menuDisabled": true,
                        "sortable": true,
                        "text": "რაოდენობა"
                    },
                    "designerId": "3b1ea5a0-20b9-4fd2-9e82-74e2c270ffef"
                },
                {
                    "type": "Ext.grid.column.Column",
                    "reference": {
                        "name": "columns",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "dataIndex": "SizeUnitName",
                        "flex": 1,
                        "menuDisabled": true,
                        "sortable": true,
                        "text": "ერთეული"
                    },
                    "designerId": "b8e4d974-ac67-4e1a-8f55-f7ed634c4918"
                },
                {
                    "type": "Ext.grid.column.Column",
                    "reference": {
                        "name": "columns",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "dataIndex": "OutputPrice",
                        "flex": 1,
                        "menuDisabled": true,
                        "sortable": true,
                        "text": "რეალიზ. ფასი"
                    },
                    "designerId": "436963d5-66bc-44e7-8f21-a92c08aca567",
                    "cn": [
                        {
                            "type": "fixedfunction",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "designer|params": [
                                    "value",
                                    "metaData",
                                    "record",
                                    "rowIndex",
                                    "colIndex",
                                    "store",
                                    "view"
                                ],
                                "fn": "renderer",
                                "implHandler": [
                                    "return record.get('OutputPrice') + ' ლარი';"
                                ]
                            },
                            "designerId": "f202b5fc-fe5f-466d-9bd5-1c6e84fb4bc7"
                        }
                    ]
                },
                {
                    "type": "Ext.grid.column.Column",
                    "reference": {
                        "name": "columns",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "dataIndex": "TotalPrice",
                        "flex": 1,
                        "menuDisabled": true,
                        "sortable": true,
                        "text": "ღირებულება"
                    },
                    "designerId": "a477ee53-0eef-456f-9d49-e87217de67a2",
                    "cn": [
                        {
                            "type": "fixedfunction",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "designer|params": [
                                    "value",
                                    "metaData",
                                    "record",
                                    "rowIndex",
                                    "colIndex",
                                    "store",
                                    "view"
                                ],
                                "fn": "renderer",
                                "implHandler": [
                                    "return record.get('TotalPrice') + ' ლარი';"
                                ]
                            },
                            "designerId": "3feb1405-272c-4bbc-b7c4-f69e2fd0aa0f"
                        }
                    ]
                },
                {
                    "type": "Ext.grid.View",
                    "reference": {
                        "name": "viewConfig",
                        "type": "object"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "disabled": null
                    },
                    "designerId": "22b4af98-8f90-4064-9412-7e952437017d",
                    "cn": [
                        {
                            "type": "fixedfunction",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "designer|params": [
                                    "record",
                                    "rowIndex",
                                    "rowParams",
                                    "store"
                                ],
                                "fn": "getRowClass",
                                "implHandler": [
                                    "return 'normal-row';"
                                ]
                            },
                            "designerId": "f641acf9-c7cd-467d-9fdd-6f22aa074f05"
                        }
                    ]
                },
                {
                    "type": "Ext.grid.column.Action",
                    "reference": {
                        "name": "columns",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "id": null,
                        "itemId": "ac",
                        "menuDisabled": true,
                        "width": 24
                    },
                    "designerId": "28bf38cd-0ec0-4e7e-b832-37a4ec8907af",
                    "cn": [
                        {
                            "type": "actioncolumnitem",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "iconCls": "icon-delete",
                                "tooltip": "წაშლა"
                            },
                            "designerId": "3499b79c-4c32-43ca-98ed-ed0fdadbe562",
                            "cn": [
                                {
                                    "type": "fixedfunction",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "designer|params": [
                                            "view",
                                            "rowIndex",
                                            "colIndex",
                                            "item",
                                            "e",
                                            "record",
                                            "row"
                                        ],
                                        "fn": "handler",
                                        "implHandler": [
                                            "var grdOutcomeProducts = this.up('grid');\r",
                                            "\r",
                                            "var form = grdOutcomeProducts.up('outcomeproducts');\r",
                                            "var cmbProducts = FindControl(form, 'cmbProducts');\r",
                                            "var txtAmount = FindControl(form, 'txtAmount');\r",
                                            "var txtTotalPrice = FindControl(form, 'txtTotalPrice');\r",
                                            "\r",
                                            "var detailModel = Ext.create('SIS.model.DetailModel');\r",
                                            "SetDelete(detailModel);\r",
                                            "detailModel.set('OperationID', record.get('OperationID'));\r",
                                            "\r",
                                            "var data = ModelToJson(detailModel);\r",
                                            "\r",
                                            "Request(\r",
                                            "    '/Home/SaveDetail',\r",
                                            "    data,\r",
                                            "    function(response){\r",
                                            "        var productID = record.get('ProductID');\r",
                                            "        Request(\r",
                                            "            '/Home/GetProductByID',\r",
                                            "            {productID: productID},\r",
                                            "            function(response1){\r",
                                            "                var productModel = CreateModel(response1, 'SIS.model.ProductModel');\r",
                                            "\r",
                                            "                var realPrice = productModel.get('InputPrice') * record.get('Amount');\r",
                                            "\r",
                                            "                productModel.set('CurrentAmount', record.get('Amount'));\r",
                                            "                productModel.set('TotalPrice', record.get('TotalPrice'));\r",
                                            "                productModel.set('RealPrice', realPrice);\r",
                                            "                productModel.set('ToChange', true);\r",
                                            "\r",
                                            "                var data2 = ModelToJson(productModel);\r",
                                            "                Request(\r",
                                            "                    '/Home/SaveProduct',\r",
                                            "                    data2,\r",
                                            "                    function(response2){\r",
                                            "                        grdOutcomeProducts.getStore().remove(record);\r",
                                            "                        cmbProducts.getStore().load();\r",
                                            "\r",
                                            "                        var txtTotalPriceSum = FindControl(form, 'txtTotalPriceSum');\r",
                                            "\r",
                                            "                        var totalPriceSum = grdOutcomeProducts.getStore().sum('TotalPrice');\r",
                                            "\r",
                                            "                        txtTotalPriceSum.setValue('ჯამი: ' + totalPriceSum + ' ლარი');\r",
                                            "                    }\r",
                                            "                );\r",
                                            "            }\r",
                                            "        );\r",
                                            "    }\r",
                                            ");"
                                        ]
                                    },
                                    "designerId": "8ff9cbab-f861-40fd-b640-7f9b0fceb7ce"
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "type": "Ext.container.Container",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "layout|flex": null
            },
            "designerId": "116843ba-7a18-4732-b1da-af13b732f221",
            "cn": [
                {
                    "type": "Ext.container.Container",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "container|align": "stretch",
                        "layout": "hbox",
                        "margin": "10 10 10 10"
                    },
                    "designerId": "d887eb42-a3c5-49d9-a0dd-47bb64d6d8cb",
                    "cn": [
                        {
                            "type": "Ext.container.Container",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "layout|flex": 1
                            },
                            "designerId": "0c80fd48-68de-46e2-95f8-aaab142531c7"
                        },
                        {
                            "type": "Ext.container.Container",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "layout|flex": 1
                            },
                            "designerId": "ee69e2d6-dccf-4bee-8c4f-76596c58812d"
                        },
                        {
                            "type": "Ext.container.Container",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "layout|flex": 1
                            },
                            "designerId": "ec77a76b-13cf-4a6d-b0d2-9c9481925eb6"
                        },
                        {
                            "type": "Ext.container.Container",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "layout|flex": 1
                            },
                            "designerId": "a850d583-f88a-4fe4-b64d-2fde4ac68f78"
                        },
                        {
                            "type": "Ext.container.Container",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "layout|flex": 1
                            },
                            "designerId": "38cbdad3-e40d-46c4-a6bc-4a380eccf2f6"
                        },
                        {
                            "type": "Ext.button.Button",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "iconCls": "icon-excel24",
                                "itemId": "btnExcel",
                                "layout|flex": null,
                                "margin": "0 10 0 0",
                                "scale": "medium",
                                "text": "",
                                "tooltip": [
                                    "ზედნადების მომზადება"
                                ]
                            },
                            "designerId": "bebf8904-7fd1-4c3f-9e8d-e566954460b1",
                            "cn": [
                                {
                                    "type": "basiceventbinding",
                                    "reference": {
                                        "name": "listeners",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "fn": "onBtnExcelClick",
                                        "implHandler": [
                                            "var form = this;\r",
                                            "\r",
                                            "var grdOutcomeProducts = FindControl(form, 'grdOutcomeProducts');\r",
                                            "var excelProducts = Ext.create('SIS.model.ExcelProductModel');\r",
                                            "var cmbProducts = FindControl(form, 'cmbProducts');\r",
                                            "var btnSave = FindControl(form, 'btnSave');\r",
                                            "\r",
                                            "if(grdOutcomeProducts.getStore().count() > 0){\r",
                                            "    grdOutcomeProducts.getStore().each(function(x){\r",
                                            "        excelProducts.ExcelNode().add(x);\r",
                                            "    });\r",
                                            "}\r",
                                            "\r",
                                            "if(grdOutcomeProducts.getStore().count() > 0){\r",
                                            "    excelProducts.set('CurrentUserID', GetCurrentUser().ID);\r",
                                            "    var data = ModelToJson(excelProducts);\r",
                                            "\r",
                                            "    CheckAction('გინდათ ზედნადების მომზადება?', function(){\r",
                                            "        Request(\r",
                                            "            '/Home/ToExcel',\r",
                                            "            data,\r",
                                            "            function(response){\r",
                                            "                fileDownload(\r",
                                            "                    '/Home/GetAttachmentFile',\r",
                                            "                    {\r",
                                            "                        windowid: GetWindowId()\r",
                                            "                    }\r",
                                            "                );\r",
                                            "\r",
                                            "                var ac = FindControl(grdOutcomeProducts, 'ac');\r",
                                            "                ac.hide();\r",
                                            "                cmbProducts.focus();\r",
                                            "                cmbProducts.clearInvalid();\r",
                                            "                btnSave.setDisabled(true);\r",
                                            "            }\r",
                                            "        );\r",
                                            "    });\r",
                                            "}"
                                        ],
                                        "name": "click",
                                        "scope": "me"
                                    },
                                    "designerId": "6d82054b-5199-4ef9-9c69-da96bfa6e3d0"
                                }
                            ]
                        },
                        {
                            "type": "Ext.form.field.Text",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "emptyText": "ჯამი:",
                                "fieldLabel": "",
                                "fieldStyle": "font-weight: bold; color: red; border: 1px solid gray;",
                                "itemId": "txtTotalPriceSum",
                                "layout|flex": 1,
                                "margin": null,
                                "readOnly": true
                            },
                            "designerId": "04ccb098-d77a-41d9-aef6-be4cb8f607a7"
                        }
                    ]
                }
            ]
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "operationID"
                ],
                "fn": "getRecord",
                "implHandler": [
                    "var form = this;\r",
                    "\r",
                    "var cmbProducts = FindControl(form, 'cmbProducts');\r",
                    "var txtSizeUnit = FindControl(form, 'txtSizeUnit');\r",
                    "var txtAmount = FindControl(form, 'txtAmount');\r",
                    "var txtOutputPrice = FindControl(form, 'txtOutputPrice');\r",
                    "var txtTotalPrice = FindControl(form, 'txtTotalPrice');\r",
                    "\r",
                    "var grdOutcomeProducts = FindControl(form, 'grdOutcomeProducts');\r",
                    "\r",
                    "var model = Ext.create('SIS.model.OutcomeProductModel');\r",
                    "\r",
                    "model.set('Name', cmbProducts.getSelectedRecord().get('Name'));\r",
                    "model.set('Amount', txtAmount.getValue());\r",
                    "model.set('SizeUnitName', cmbProducts.getSelectedRecord().get('SizeUnitName'));\r",
                    "model.set('OutputPrice', txtOutputPrice.getValue());\r",
                    "model.set('TotalPrice', txtTotalPrice.getValue());\r",
                    "model.set('OperationID', operationID);\r",
                    "model.set('ProductID', cmbProducts.getValue());\r",
                    "\r",
                    "grdOutcomeProducts.getStore().add(model);\r",
                    "\r",
                    "var txtTotalPriceSum = FindControl(form, 'txtTotalPriceSum');\r",
                    "\r",
                    "var totalPriceSum = grdOutcomeProducts.getStore().sum('TotalPrice');\r",
                    "\r",
                    "txtTotalPriceSum.setValue('ჯამი: ' + totalPriceSum + ' ლარი');"
                ]
            },
            "designerId": "9b3066ce-6ce0-43f0-a1a1-db47170f614f"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "resetForm",
                "implHandler": [
                    "var form = this;\r",
                    "\r",
                    "var cmbProducts = FindControl(form, 'cmbProducts');\r",
                    "var txtSizeUnit = FindControl(form, 'txtSizeUnit');\r",
                    "var txtAmount = FindControl(form, 'txtAmount');\r",
                    "var txtOutputPrice = FindControl(form, 'txtOutputPrice');\r",
                    "var txtTotalPrice = FindControl(form, 'txtTotalPrice');\r",
                    "\r",
                    "cmbProducts.reset();\r",
                    "txtSizeUnit.reset();\r",
                    "txtAmount.reset();\r",
                    "txtOutputPrice.reset();\r",
                    "txtTotalPrice.reset();"
                ]
            },
            "designerId": "1319d1e6-60b0-47c5-b8e2-5613825019f0"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "validate",
                "implHandler": [
                    "var form = this;\r",
                    "\r",
                    "var cmbCustomers = FindControl(form, 'cmbCustomers');\r",
                    "var txtCode = FindControl(form, 'txtCode');\r",
                    "var txtAddress = FindControl(form, 'txtAddress');\r",
                    "\r",
                    "var cmbProducts = FindControl(form, 'cmbProducts');\r",
                    "var txtSizeUnit = FindControl(form, 'txtSizeUnit');\r",
                    "var txtAmount = FindControl(form, 'txtAmount');\r",
                    "var txtOutputPrice = FindControl(form, 'txtOutputPrice');\r",
                    "var txtTotalPrice = FindControl(form, 'txtTotalPrice');\r",
                    "\r",
                    "var valid = true;\r",
                    "\r",
                    "valid = valid && cmbCustomers.validate();\r",
                    "valid = valid && txtCode.validate();\r",
                    "valid = valid && txtAddress.validate();\r",
                    "valid = valid && cmbProducts.validate();\r",
                    "valid = valid && txtSizeUnit.validate();\r",
                    "valid = valid && txtAmount.validate();\r",
                    "valid = valid && txtOutputPrice.validate();\r",
                    "valid = valid && txtTotalPrice.validate();\r",
                    "\r",
                    "if(valid){\r",
                    "    var record = cmbProducts.getSelectedRecord();\r",
                    "    if(record.get('CurrentAmount') > txtAmount.getValue()){\r",
                    "        valid = true;\r",
                    "    }else if(record.get('CurrentAmount') == txtAmount.getValue()){\r",
                    "        valid = true;\r",
                    "        MessageBox('', 'საწყობში არსებული საქონლის რაოდენობა ზუსტად შეესაბამება მითითებულს.');\r",
                    "    }else if(record.get('CurrentAmount') < txtAmount.getValue()){\r",
                    "        valid = false;\r",
                    "        MessageBox('', 'საწყობში არ არის მითითებული რაოდენობის საქონელი!');\r",
                    "    }\r",
                    "}\r",
                    "\r",
                    "return valid;"
                ]
            },
            "designerId": "40c0e642-c560-4849-a066-272aa8d9dbed"
        }
    ]
}